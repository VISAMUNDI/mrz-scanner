parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({9:[function(require,module,exports) {
(function(){var e=!1,t=function(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.EXIF=t):this.EXIF=t;var r=t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},o=t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},a=t.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},s=t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(e){return!!e.exifdata}function u(n,r){function i(i){var o=c(i);n.exifdata=o||{};var a=function(t){var n=new DataView(t);e&&console.log("Got file of length "+t.byteLength);if(255!=n.getUint8(0)||216!=n.getUint8(1))return e&&console.log("Not a valid JPEG"),!1;var r=2,i=t.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;r<i;){if(o(n,r)){var a=n.getUint8(r+7);a%2!=0&&(a+=1),0===a&&(a=4);var s=r+8+a,l=n.getUint16(r+6+a);return f(t,s,l)}r++}}(i);if(n.iptcdata=a||{},t.isXmpEnabled){var s=function(t){if(!("DOMParser"in self))return;var n=new DataView(t);e&&console.log("Got file of length "+t.byteLength);if(255!=n.getUint8(0)||216!=n.getUint8(1))return e&&console.log("Not a valid JPEG"),!1;var r=2,i=t.byteLength,o=new DOMParser;for(;r<i-4;){if("http"==p(n,r,4)){var a=r-1,s=n.getUint16(r-2)-1,l=p(n,a,s),u=l.indexOf("xmpmeta>")+8,c=(l=l.substring(l.indexOf("<x:xmpmeta"),u)).indexOf("x:xmpmeta")+10;l=l.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(c);var d=o.parseFromString(l,"text/xml");return P(d)}r++}}(i);n.xmpdata=s||{}}r&&r.call(n)}if(n.src)if(/^data\:/i.test(n.src))i(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}(n.src));else if(/^blob\:/i.test(n.src)){(a=new FileReader).onload=function(e){i(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(n.src,function(e){a.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";i(o.response),o=null},o.open("GET",n.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(n instanceof self.Blob||n instanceof self.File)){var a;(a=new FileReader).onload=function(t){e&&console.log("Got file of length "+t.target.result.byteLength),i(t.target.result)},a.readAsArrayBuffer(n)}}function c(t){var n=new DataView(t);if(e&&console.log("Got file of length "+t.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return e&&console.log("Not a valid JPEG"),!1;for(var r,i=2,o=t.byteLength;i<o;){if(255!=n.getUint8(i))return e&&console.log("Not a valid marker at offset "+i+", found: "+n.getUint8(i)),!1;if(r=n.getUint8(i+1),e&&console.log(r),225==r)return e&&console.log("Found 0xFFE1 marker"),h(n,i+4,n.getUint16(i+2));i+=2+n.getUint16(i+2)}}var d={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function f(e,t,n){for(var r,i,o,a,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(a=s.getUint8(u+2))in d&&((o=s.getInt16(u+3))+5,i=d[a],r=p(s,u+5,o),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(r):l[i]=[l[i],r]:l[i]=r),u++;return l}function g(t,n,r,i,o){var a,s,l,u=t.getUint16(r,!o),c={};for(l=0;l<u;l++)a=r+12*l+2,!(s=i[t.getUint16(a,!o)])&&e&&console.log("Unknown tag: "+t.getUint16(a,!o)),c[s]=m(t,a,n,r,o);return c}function m(e,t,n,r,i){var o,a,s,l,u,c,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),g=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!i);for(o=f>4?g:t+8,a=[],l=0;l<f;l++)a[l]=e.getUint8(o+l);return a;case 2:return p(e,o=f>4?g:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!i);for(o=f>2?g:t+8,a=[],l=0;l<f;l++)a[l]=e.getUint16(o+2*l,!i);return a;case 4:if(1==f)return e.getUint32(t+8,!i);for(a=[],l=0;l<f;l++)a[l]=e.getUint32(g+4*l,!i);return a;case 5:if(1==f)return u=e.getUint32(g,!i),c=e.getUint32(g+4,!i),(s=new Number(u/c)).numerator=u,s.denominator=c,s;for(a=[],l=0;l<f;l++)u=e.getUint32(g+8*l,!i),c=e.getUint32(g+4+8*l,!i),a[l]=new Number(u/c),a[l].numerator=u,a[l].denominator=c;return a;case 9:if(1==f)return e.getInt32(t+8,!i);for(a=[],l=0;l<f;l++)a[l]=e.getInt32(g+4*l,!i);return a;case 10:if(1==f)return e.getInt32(g,!i)/e.getInt32(g+4,!i);for(a=[],l=0;l<f;l++)a[l]=e.getInt32(g+8*l,!i)/e.getInt32(g+4+8*l,!i);return a}}function p(e,t,r){var i="";for(n=t;n<t+r;n++)i+=String.fromCharCode(e.getUint8(n));return i}function h(t,n){if("Exif"!=p(t,n,4))return e&&console.log("Not valid EXIF data! "+p(t,n,4)),!1;var l,u,c,d,f,m=n+6;if(18761==t.getUint16(m))l=!1;else{if(19789!=t.getUint16(m))return e&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;l=!0}if(42!=t.getUint16(m+2,!l))return e&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var h=t.getUint32(m+4,!l);if(h<8)return e&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(m+4,!l)),!1;if((u=g(t,m,m+h,i,l)).ExifIFDPointer)for(c in d=g(t,m,m+u.ExifIFDPointer,r,l)){switch(c){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":d[c]=s[c][d[c]];break;case"ExifVersion":case"FlashpixVersion":d[c]=String.fromCharCode(d[c][0],d[c][1],d[c][2],d[c][3]);break;case"ComponentsConfiguration":d[c]=s.Components[d[c][0]]+s.Components[d[c][1]]+s.Components[d[c][2]]+s.Components[d[c][3]]}u[c]=d[c]}if(u.GPSInfoIFDPointer)for(c in f=g(t,m,m+u.GPSInfoIFDPointer,o,l)){switch(c){case"GPSVersionID":f[c]=f[c][0]+"."+f[c][1]+"."+f[c][2]+"."+f[c][3]}u[c]=f[c]}return u.thumbnail=function(e,t,n,r){var i=function(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}(e,t+n,r);if(!i)return{};if(i>e.byteLength)return{};var o=g(e,t,t+i,a,r);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var s=t+o.JpegIFOffset,l=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,s,l)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}(t,m,h,l),u}function S(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(null==t[a])t[a]=S(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(S(o))}}return t}function P(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),i=r.attributes;for(var o in i){var a=i[o],s=a.nodeName,l=a.nodeValue;void 0!==s&&(t[s]=l)}var u=r.nodeName;if(void 0===t[u])t[u]=S(r);else{if(void 0===t[u].push){var c=t[u];t[u]=[],t[u].push(c)}t[u].push(S(r))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}t.enableXmp=function(){t.isXmpEnabled=!0},t.disableXmp=function(){t.isXmpEnabled=!1},t.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(l(e)?t&&t.call(e):u(e,t),!0)},t.getTag=function(e,t){if(l(e))return e.exifdata[t]},t.getIptcTag=function(e,t){if(l(e))return e.iptcdata[t]},t.getAllTags=function(e){if(!l(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},t.getAllIptcTags=function(e){if(!l(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},t.pretty=function(e){if(!l(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},t.readFromBinaryFile=function(e){return c(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return t})}).call(this);
},{}],10:[function(require,module,exports) {
!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.commonJsStrict={})}(this,function(e){"function"!=typeof Promise&&function(e){function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,t(o,this),t(r,this))}function i(e){var t=this;return null===this._state?void this._deferreds.push(e):void h(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void s(t(n,e),t(o,this),t(r,this))}this._state=!0,this._value=e,a.call(this)}catch(e){r.call(this,e)}}function r(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;t>e;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(e){if(i)return;i=!0,n(e)}}var l=setTimeout,h="function"==typeof setImmediate&&setImmediate||function(e){l(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var o=this;return new n(function(n,r){i.call(o,new function(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}(e,t,n,r))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new n(function(t,n){function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(r,e)},n)}e[r]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)i(r,e[r])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},n._setImmediateFn=function(e){h=e},"undefined"!=typeof module&&module.exports?module.exports=n:e.Promise||(e.Promise=n)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),o=i.length,r=new Uint8Array(o),a=0;a<o;a++)r[a]=i.charCodeAt(a);e(new Blob([r],{type:t||"image/png"}))}});var t,n,i,o=["Webkit","Moz","ms"],r=document.createElement("div").style,a=[1,8,3,6],s=[2,7,4,5];function l(e){if(e in r)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=o.length;n--;)if((e=o[n]+t)in r)return e}function h(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},h(e[n],t[n])):e[n]=t[n];return e}function u(e){return h({},e)}function c(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function p(e,t,n){if("string"==typeof t){var i=t;(t={})[i]=n}for(var o in t)e.style[o]=t[o]}function d(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function m(e,t){for(var n in t)e.setAttribute(n,t[n])}function f(e){return parseInt(e,10)}function v(e,t){var n=e.naturalWidth,i=e.naturalHeight,o=t||b(e);if(o&&o>=5){var r=n;n=i,i=r}return{width:n,height:i}}n=l("transform"),t=l("transformOrigin"),i=l("userSelect");var g={translate3d:{suffix:", 0px"},translate:{suffix:""}},w=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};w.parse=function(e){return e.style?w.parse(e.style[n]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?w.fromMatrix(e):w.fromString(e)},w.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new w(f(t[4]),f(t[5]),parseFloat(t[0]))},w.fromString=function(e){var t=e.split(") "),n=t[0].substring(q.globals.translate.length+1).split(","),i=t.length>1?t[1].substring(6):1,o=n.length>1?n[0]:0,r=n.length>1?n[1]:0;return new w(o,r,i)},w.prototype.toString=function(){var e=g[q.globals.translate].suffix||"";return q.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var y=function(e){if(!e||!e.style[t])return this.x=0,void(this.y=0);var n=e.style[t].split(" ");this.x=parseFloat(n[0]),this.y=parseFloat(n[1])};function b(e){return e.exifdata&&e.exifdata.Orientation?f(e.exifdata.Orientation):1}function x(e,t,n){var i=t.width,o=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),n){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,o),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,o),r.scale(1,-1);break;case 5:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.translate(0,-o);break;case 7:e.width=o,e.height=i,r.rotate(-90*Math.PI/180),r.translate(-i,o),r.scale(1,-1);break;case 8:e.width=o,e.height=i,r.translate(0,i),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,i,o),r.restore()}function C(){var e,t,o,r,a,s=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||E.call(this),this.data={},this.elements={},e=this.elements.boundary=document.createElement("div"),t=this.elements.viewport=document.createElement("div"),this.elements.img=document.createElement("img"),o=this.elements.overlay=document.createElement("div"),this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=this.elements.img,d(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),r=this.options.boundary.width,a=this.options.boundary.height,p(e,{width:r+(isNaN(r)?"":"px"),height:a+(isNaN(a)?"":"px")}),d(t,"cr-viewport"),s&&d(t,s),p(t,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),t.setAttribute("tabindex",0),d(this.elements.preview,"cr-image"),m(this.elements.preview,{alt:"preview","aria-grabbed":"false"}),d(o,"cr-overlay"),this.element.appendChild(e),e.appendChild(this.elements.preview),e.appendChild(t),e.appendChild(o),d(this.element,"croppie-container"),this.options.customClass&&d(this.element,this.options.customClass),function(){var e,t,o,r,a,s=this,l=!1;function h(e,t){var n=s.elements.preview.getBoundingClientRect(),i=a.y+t,o=a.x+e;s.options.enforceBoundary?(r.top>n.top+t&&r.bottom<n.bottom+t&&(a.y=i),r.left>n.left+e&&r.right<n.right+e&&(a.x=o)):(a.y=i,a.x=o)}function u(e){s.elements.preview.setAttribute("aria-grabbed",e),s.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function d(n){if((void 0===n.button||0===n.button)&&(n.preventDefault(),!l)){if(l=!0,e=n.pageX,t=n.pageY,n.touches){var o=n.touches[0];e=o.pageX,t=o.pageY}u(l),a=w.parse(s.elements.preview),window.addEventListener("mousemove",m),window.addEventListener("touchmove",m),window.addEventListener("mouseup",f),window.addEventListener("touchend",f),document.body.style[i]="none",r=s.elements.viewport.getBoundingClientRect()}}function m(i){i.preventDefault();var r=i.pageX,l=i.pageY;if(i.touches){var u=i.touches[0];r=u.pageX,l=u.pageY}var d=r-e,m=l-t,f={};if("touchmove"===i.type&&i.touches.length>1){var v=i.touches[0],g=i.touches[1],w=Math.sqrt((v.pageX-g.pageX)*(v.pageX-g.pageX)+(v.pageY-g.pageY)*(v.pageY-g.pageY));o||(o=w/s._currentZoom);var y=w/o;return L.call(s,y),void c(s.elements.zoomer)}h(d,m),f[n]=a.toString(),p(s.elements.preview,f),R.call(s),t=l,e=r}function f(){u(l=!1),window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",f),window.removeEventListener("touchend",f),document.body.style[i]="",B.call(s),Y.call(s),o=0}s.elements.overlay.addEventListener("mousedown",d),s.elements.viewport.addEventListener("keydown",function(e){var t=37,l=38,u=39,c=40;if(!e.shiftKey||e.keyCode!==l&&e.keyCode!==c){if(s.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var d=function(e){switch(e){case t:return[1,0];case l:return[0,1];case u:return[-1,0];case c:return[0,-1]}}(e.keyCode);a=w.parse(s.elements.preview),document.body.style[i]="none",r=s.elements.viewport.getBoundingClientRect(),function(e){var t=e[0],r=e[1],l={};h(t,r),l[n]=a.toString(),p(s.elements.preview,l),R.call(s),document.body.style[i]="",B.call(s),Y.call(s),o=0}(d)}}else{var m=0;m=e.keyCode===l?parseFloat(s.elements.zoomer.value,10)+parseFloat(s.elements.zoomer.step,10):parseFloat(s.elements.zoomer.value,10)-parseFloat(s.elements.zoomer.step,10),s.setZoom(m)}}),s.elements.overlay.addEventListener("touchstart",d)}.call(this),this.options.enableZoom&&function(){var e=this,t=e.elements.zoomerWrap=document.createElement("div"),n=e.elements.zoomer=document.createElement("input");function i(){_.call(e,{value:parseFloat(n.value),origin:new y(e.elements.preview),viewportRect:e.elements.viewport.getBoundingClientRect(),transform:w.parse(e.elements.preview)})}function o(t){var n,o;if("ctrl"===e.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,o=e._currentZoom+n*e._currentZoom,t.preventDefault(),L.call(e,o),i.call(e)}d(t,"cr-slider-wrap"),d(n,"cr-slider"),n.type="range",n.step="0.0001",n.value=1,n.style.display=e.options.showZoomer?"":"none",n.setAttribute("aria-label","zoom"),e.element.appendChild(t),t.appendChild(n),e._currentZoom=1,e.elements.zoomer.addEventListener("input",i),e.elements.zoomer.addEventListener("change",i),e.options.mouseWheelZoom&&(e.elements.boundary.addEventListener("mousewheel",o),e.elements.boundary.addEventListener("DOMMouseScroll",o))}.call(this),this.options.enableResize&&function(){var e,t,n,o,r,a,s,l=this,h=document.createElement("div"),u=!1,c=50;d(h,"cr-resizer"),p(h,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(d(a=document.createElement("div"),"cr-resizer-vertical"),h.appendChild(a));this.options.resizeControls.width&&(d(s=document.createElement("div"),"cr-resizer-horisontal"),h.appendChild(s));function m(a){if((void 0===a.button||0===a.button)&&(a.preventDefault(),!u)){var s=l.elements.overlay.getBoundingClientRect();if(u=!0,t=a.pageX,n=a.pageY,e=-1!==a.currentTarget.className.indexOf("vertical")?"v":"h",o=s.width,r=s.height,a.touches){var h=a.touches[0];t=h.pageX,n=h.pageY}window.addEventListener("mousemove",f),window.addEventListener("touchmove",f),window.addEventListener("mouseup",v),window.addEventListener("touchend",v),document.body.style[i]="none"}}function f(i){var a=i.pageX,s=i.pageY;if(i.preventDefault(),i.touches){var u=i.touches[0];a=u.pageX,s=u.pageY}var d=a-t,m=s-n,f=l.options.viewport.height+m,v=l.options.viewport.width+d;"v"===e&&f>=c&&f<=r?(p(h,{height:f+"px"}),l.options.boundary.height+=m,p(l.elements.boundary,{height:l.options.boundary.height+"px"}),l.options.viewport.height+=m,p(l.elements.viewport,{height:l.options.viewport.height+"px"})):"h"===e&&v>=c&&v<=o&&(p(h,{width:v+"px"}),l.options.boundary.width+=d,p(l.elements.boundary,{width:l.options.boundary.width+"px"}),l.options.viewport.width+=d,p(l.elements.viewport,{width:l.options.viewport.width+"px"})),R.call(l),O.call(l),B.call(l),Y.call(l),n=s,t=a}function v(){u=!1,window.removeEventListener("mousemove",f),window.removeEventListener("touchmove",f),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),document.body.style[i]=""}a&&(a.addEventListener("mousedown",m),a.addEventListener("touchstart",m));s&&(s.addEventListener("mousedown",m),s.addEventListener("touchstart",m));this.elements.boundary.appendChild(h)}.call(this)}function E(){return this.options.enableExif&&window.EXIF}function L(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=j(e,4);t.value=Math.max(t.min,Math.min(t.max,n))}}function _(e){var i=this,o=e?e.transform:w.parse(i.elements.preview),r=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),a=e?e.origin:new y(i.elements.preview);function s(){var e={};e[n]=o.toString(),e[t]=a.toString(),p(i.elements.preview,e)}if(i._currentZoom=e?e.value:i._currentZoom,o.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),s(),i.options.enforceBoundary){var l=function(e){var t=this._currentZoom,n=e.width,i=e.height,o=this.elements.boundary.clientWidth/2,r=this.elements.boundary.clientHeight/2,a=this.elements.preview.getBoundingClientRect(),s=a.width,l=a.height,h=n/2,u=i/2,c=-1*(h/t-o),p=-1*(u/t-r),d=1/t*h,m=1/t*u;return{translate:{maxX:c,minX:c-(s*(1/t)-n*(1/t)),maxY:p,minY:p-(l*(1/t)-i*(1/t))},origin:{maxX:s*(1/t)-d,minX:d,maxY:l*(1/t)-m,minY:m}}}.call(i,r),h=l.translate,u=l.origin;o.x>=h.maxX&&(a.x=u.minX,o.x=h.maxX),o.x<=h.minX&&(a.x=u.maxX,o.x=h.minX),o.y>=h.maxY&&(a.y=u.minY,o.y=h.maxY),o.y<=h.minY&&(a.y=u.maxY,o.y=h.minY)}s(),X.call(i),Y.call(i)}function B(){var e=this._currentZoom,i=this.elements.preview.getBoundingClientRect(),o=this.elements.viewport.getBoundingClientRect(),r=w.parse(this.elements.preview.style[n]),a=new y(this.elements.preview),s=o.top-i.top+o.height/2,l=o.left-i.left+o.width/2,h={},u={};h.y=s/e,h.x=l/e,u.y=(h.y-a.y)*(1-e),u.x=(h.x-a.x)*(1-e),r.x-=u.x,r.y-=u.y;var c={};c[t]=h.x+"px "+h.y+"px",c[n]=r.toString(),p(this.elements.preview,c)}function R(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();p(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}y.prototype.toString=function(){return this.x+"px "+this.y+"px"};var Z,z,M,I,X=(Z=R,z=500,function(){var e=this,t=arguments,n=M&&!I;clearTimeout(I),I=setTimeout(function(){I=null,M||Z.apply(e,t)},z),n&&Z.apply(e,t)});function Y(){var e,t=this.get();F.call(this)&&(this.options.update.call(this,t),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.croppie",t):(window.CustomEvent?e=new CustomEvent("update",{detail:t}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,t),this.element.dispatchEvent(e)))}function F(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function W(){var e,i={},o=this.elements.preview,r=new w(0,0,1),a=new y;F.call(this)&&!this.data.bound&&(this.data.bound=!0,i[n]=r.toString(),i[t]=a.toString(),i.opacity=1,p(o,i),e=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=e.width,this._originalImageHeight=e.height,this.data.orientation=b(this.elements.img),this.options.enableZoom?O.call(this,!0):this._currentZoom=1,r.scale=this._currentZoom,i[n]=r.toString(),p(o,i),this.data.points.length?function(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var i=e[2]-e[0],o=this.elements.viewport.getBoundingClientRect(),r=this.elements.boundary.getBoundingClientRect(),a={left:o.left-r.left,top:o.top-r.top},s=o.width/i,l=e[1],h=e[0],u=-1*e[1]+a.top,c=-1*e[0]+a.left,d={};d[t]=h+"px "+l+"px",d[n]=new w(c,u,s).toString(),p(this.elements.preview,d),L.call(this,s),this._currentZoom=s}.call(this,this.data.points):function(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),i=this.elements.boundary.getBoundingClientRect(),o=t.left-i.left,r=t.top-i.top,a=o-(e.width-t.width)/2,s=r-(e.height-t.height)/2,l=new w(a,s,this._currentZoom);p(this.elements.preview,n,l.toString())}.call(this),B.call(this),R.call(this))}function O(e){var t,n,i,o,r=0,a=this.options.maxZoom||1.5,s=this.elements.zoomer,l=parseFloat(s.value),h=this.elements.boundary.getBoundingClientRect(),u=v(this.elements.img,this.data.orientation),p=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(i=p.width/u.width,o=p.height/u.height,r=Math.max(i,o)),r>=a&&(a=r+1),s.min=j(r,4),s.max=j(a,4),!e&&(l<s.min||l>s.max)?L.call(this,l<s.min?s.min:s.max):e&&(n=Math.max(h.width/u.width,h.height/u.height),t=null!==this.data.boundZoom?this.data.boundZoom:n,L.call(this,t)),c(s)}function k(e){var t=e.points,n=f(t[0]),i=f(t[1]),o=f(t[2])-n,r=f(t[3])-i,a=e.circle,s=document.createElement("canvas"),l=s.getContext("2d"),h=e.outputWidth||o,u=e.outputHeight||r;e.outputWidth&&e.outputHeight;return s.width=h,s.height=u,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,h,u)),!1!==this.options.enforceBoundary&&(o=Math.min(o,this._originalImageWidth),r=Math.min(r,this._originalImageHeight)),l.drawImage(this.elements.preview,n,i,o,r,0,0,h,u),a&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(s.width/2,s.height/2,s.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),s}function A(e,t){var n,i,o,r,a=this,s=[],l=null,h=E.call(a);if("string"==typeof e)n=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&a.data.url)return W.call(a),Y.call(a),null;n=e.url,s=e.points||[],l=void 0===e.zoom?null:e.zoom}return a.data.bound=!1,a.data.url=n||a.data.url,a.data.boundZoom=l,(i=n,o=h,r=new Image,r.style.opacity=0,new Promise(function(e){function t(){r.style.opacity=1,setTimeout(function(){e(r)},1)}r.removeAttribute("crossOrigin"),i.match(/^https?:\/\/|^\/\//)&&r.setAttribute("crossOrigin","anonymous"),r.onload=function(){o?EXIF.getData(r,function(){t()}):t()},r.src=i})).then(function(n){if(function(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){e.classList.add(t)}),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}.call(a,n),s.length)a.options.relative&&(s=[s[0]*n.naturalWidth/100,s[1]*n.naturalHeight/100,s[2]*n.naturalWidth/100,s[3]*n.naturalHeight/100]);else{var i,o,r=v(n),l=a.elements.viewport.getBoundingClientRect(),h=l.width/l.height;r.width/r.height>h?i=(o=r.height)*h:(i=r.width,o=r.height/h);var u=(r.width-i)/2,c=(r.height-o)/2,p=u+i,d=c+o;a.data.points=[u,c,p,d]}a.data.points=s.map(function(e){return parseFloat(e)}),a.options.useCanvas&&function(e){var t=this.elements.canvas,n=this.elements.img;t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=n.width,t.height=n.height,x(t,n,this.options.enableOrientation&&e||b(n))}.call(a,e.orientation),W.call(a),Y.call(a),t&&t()}).catch(function(e){console.error("Croppie:"+e)})}function j(e,t){return parseFloat(e).toFixed(t||0)}function H(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),n=t.left-e.left,i=t.top-e.top,o=(t.width-this.elements.viewport.offsetWidth)/2,r=(t.height-this.elements.viewport.offsetHeight)/2,a=n+this.elements.viewport.offsetWidth+o,s=i+this.elements.viewport.offsetHeight+r,l=this._currentZoom;(l===1/0||isNaN(l))&&(l=1);var h=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return n=Math.max(h,n/l),i=Math.max(h,i/l),a=Math.max(h,a/l),s=Math.max(h,s/l),{points:[j(n),j(i),j(a),j(s)],zoom:l,orientation:this.data.orientation}}var N={type:"canvas",format:"png",quality:1},S=["jpeg","webp","png"];function P(e){var t=this,n=H.call(t),i=h(u(N),u(e)),o="string"==typeof e?e:i.type||"base64",r=i.size||"viewport",a=i.format,s=i.quality,l=i.backgroundColor,c="boolean"==typeof i.circle?i.circle:"circle"===t.options.viewport.type,m=t.elements.viewport.getBoundingClientRect(),f=m.width/m.height;return"viewport"===r?(n.outputWidth=m.width,n.outputHeight=m.height):"object"==typeof r&&(r.width&&r.height?(n.outputWidth=r.width,n.outputHeight=r.height):r.width?(n.outputWidth=r.width,n.outputHeight=r.width/f):r.height&&(n.outputWidth=r.height*f,n.outputHeight=r.height)),S.indexOf(a)>-1&&(n.format="image/"+a,n.quality=s),n.circle=c,n.url=t.data.url,n.backgroundColor=l,new Promise(function(e,i){switch(o.toLowerCase()){case"rawcanvas":e(k.call(t,n));break;case"canvas":case"base64":e(function(e){return k.call(this,e).toDataURL(e.format,e.quality)}.call(t,n));break;case"blob":(function(e){var t=this;return new Promise(function(n,i){k.call(t,e).toBlob(function(e){n(e)},e.format,e.quality)})}).call(t,n).then(e);break;default:e(function(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),o=t[2]-t[0],r=t[3]-t[1];return d(n,"croppie-result"),n.appendChild(i),p(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),i.src=e.url,p(n,{width:o+"px",height:r+"px"}),n}.call(t,n))}})}function D(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t=this.elements.canvas;this.data.orientation=function(e,t){var n=a.indexOf(e)>-1?a:s,i=n.indexOf(e),o=t/90%n.length;return n[(n.length+i+o%n.length)%n.length]}(this.data.orientation,e),x(t,this.elements.img,this.data.orientation),O.call(this),_.call(this),copy=null}if(window.jQuery){var T=window.jQuery;T.fn.croppie=function(e){if("string"===typeof e){var t=Array.prototype.slice.call(arguments,1),n=T(this).data("croppie");return"get"===e?n.get():"result"===e?n.result.apply(n,t):"bind"===e?n.bind.apply(n,t):this.each(function(){var n=T(this).data("croppie");if(n){var i=n[e];if(!T.isFunction(i))throw"Croppie "+e+" method not found";i.apply(n,t),"destroy"===e&&T(this).removeData("croppie")}})}return this.each(function(){var t=new q(this,e);t.$=T,T(this).data("croppie",t)})}}function q(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=h(u(q.defaults),t),"img"===this.element.tagName.toLowerCase()){var n=this.element;d(n,"cr-original-image"),m(n,{"aria-hidden":"true",alt:""});var i=document.createElement("div");this.element.parentNode.appendChild(i),i.appendChild(n),this.element=i,this.options.url=this.options.url||n.src}if(C.call(this),this.options.url){var o={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,A.call(this,o)}}q.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},q.globals={translate:"translate3d"},h(q.prototype,{bind:function(e,t){return A.call(this,e,t)},get:function(){var e=H.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return P.call(this,e)},refresh:function(){return function(){W.call(this)}.call(this)},setZoom:function(e){L.call(this,e),c(this.elements.zoomer)},rotate:function(e){D.call(this,e)},destroy:function(){return function(){var e,t;this.element.removeChild(this.elements.boundary),e=this.element,t="croppie-container",e.classList?e.classList.remove(t):e.className=e.className.replace(t,""),this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap),delete this.elements}.call(this)}}),e.Croppie=window.Croppie=q});
},{}],13:[function(require,module,exports) {
"use strict";const a={AFG:"Afghanistan",ALA:"Åland Islands",ALB:"Albania",DZA:"Algeria",ASM:"American Samoa",AND:"Andorra",AGO:"Angola",AIA:"Anguilla",ATA:"Antarctica",ATG:"Antigua and Barbuda",ARG:"Argentina",ARM:"Armenia",ABW:"Aruba",AUS:"Australia",AUT:"Austria",AZE:"Azerbaijan",BHS:"Bahamas",BHR:"Bahrain",BGD:"Bangladesh",BRB:"Barbados",BLR:"Belarus",BEL:"Belgium",BLZ:"Belize",BEN:"Benin",BMU:"Bermuda",BTN:"Bhutan",BOL:"Bolivia, Plurinational State of",BES:"Bonaire, Sint Eustatius and Saba",BIH:"Bosnia and Herzegovina",BWA:"Botswana",BVT:"Bouvet Island",BRA:"Brazil",IOT:"British Indian Ocean Territory",BRN:"Brunei Darussalam",BGR:"Bulgaria",BFA:"Burkina Faso",BDI:"Burundi",CPV:"Cabo Verde",KHM:"Cambodia",CMR:"Cameroon",CAN:"Canada",CYM:"Cayman Islands",CAF:"Central African Republic",TCD:"Chad",CHL:"Chile",CHN:"China",CXR:"Christmas Island",CCK:"Cocos (Keeling) Islands",COL:"Colombia",COM:"Comoros",COG:"Congo",COD:"Congo, Democratic Republic of the",COK:"Cook Islands",CRI:"Costa Rica",CIV:"Côte d’Ivoire",HRV:"Croatia",CUB:"Cuba",CUW:"Curaçao",CYP:"Cyprus",CZE:"Czech Republic",DNK:"Denmark",DJI:"Djibouti",DMA:"Dominica",DOM:"Dominican Republic",ECU:"Ecuador",EGY:"Egypt",SLV:"El Salvador",GNQ:"Equatorial Guinea",ERI:"Eritrea",EST:"Estonia",ETH:"Ethiopia",FLK:"Falkland Islands (Malvinas)",FRO:"Faroe Islands",FJI:"Fiji",FIN:"Finland",FRA:"France",GUF:"French Guiana",PYF:"French Polynesia",ATF:"French Southern Territories",GAB:"Gabon",GMB:"Gambia",GEO:"Georgia",D:"Germany",GHA:"Ghana",GIB:"Gibraltar",GRC:"Greece",GRL:"Greenland",GRD:"Grenada",GLP:"Guadeloupe",GUM:"Guam",GTM:"Guatemala",GGY:"Guernsey",GIN:"Guinea",GNB:"Guinea-Bissau",GUY:"Guyana",HTI:"Haiti",HMD:"Heard Island and McDonald Islands",VAT:"Holy See (Vatican City State)",HND:"Honduras",HKG:"Hong Kong Special Administrative Region of China",HUN:"Hungary",ISL:"Iceland",IND:"India",IDN:"Indonesia",IRN:"Iran (Islamic Republic of)",IRQ:"Iraq",IRL:"Ireland",IMN:"Isle of Man",ISR:"Israel",ITA:"Italy",JAM:"Jamaica",JPN:"Japan",JEY:"Jersey",JOR:"Jordan",KAZ:"Kazakhstan",KEN:"Kenya",KIR:"Kiribati",PRK:"Korea, Democratic People’s Republic of",KOR:"Korea, Republic of",KWT:"Kuwait",KGZ:"Kyrgyzstan",LAO:"Lao People’s Democratic Republic",LVA:"Latvia",LBN:"Lebanon",LSO:"Lesotho",LBR:"Liberia",LBY:"Libya",LIE:"Liechtenstein",LTU:"Lithuania",LUX:"Luxembourg",MAC:"Macao Special Administrative Region of China",MKD:"Macedonia, the former Yugoslav Republic of",MDG:"Madagascar",MWI:"Malawi",MYS:"Malaysia",MDV:"Maldives",MLI:"Mali",MLT:"Malta",MHL:"Marshall Islands",MTQ:"Martinique",MRT:"Mauritania",MUS:"Mauritius",MYT:"Mayotte",MEX:"Mexico",FSM:"Micronesia (Federated States of)",MDA:"Moldova, Republic of",MCO:"Monaco",MNG:"Mongolia",MNE:"Montenegro",MSR:"Montserrat",MAR:"Morocco",MOZ:"Mozambique",MMR:"Myanmar",NAM:"Namibia",NRU:"Nauru",NPL:"Nepal",NLD:"Netherlands",ANT:"Netherlands Antilles",NTZ:"Neutral Zone",NCL:"New Caledonia",NZL:"New Zealand",NIC:"Nicaragua",NER:"Niger",NGA:"Nigeria",NIU:"Niue",NFK:"Norfolk Island",MNP:"Northern Mariana Islands",NOR:"Norway",OMN:"Oman",PAK:"Pakistan",PLW:"Palau",PSE:"Palestine, State of",PAN:"Panama",PNG:"Papua New Guinea",PRY:"Paraguay",PER:"Peru",PHL:"Philippines",PCN:"Pitcairn",POL:"Poland",PRT:"Portugal",PRI:"Puerto Rico",QAT:"Qatar",REU:"Réunion",ROU:"Romania",RUS:"Russian Federation",RWA:"Rwanda",BLM:"Saint Barthélemy",SHN:"Saint Helena, Ascension and Tristan da Cunha",KNA:"Saint Kitts and Nevis",LCA:"Saint Lucia",MAF:"Saint Martin (French part)",SPM:"Saint Pierre and Miquelon",VCT:"Saint Vincent and the Grenadines",WSM:"Samoa",SMR:"San Marino",STP:"Sao Tome and Principe",SAU:"Saudi Arabia",SEN:"Senegal",SRB:"Serbia",SYC:"Seychelles",SLE:"Sierra Leone",SGP:"Singapore",SXM:"Sint Maarten (Dutch part)",SVK:"Slovakia",SVN:"Slovenia",SLB:"Solomon Islands",SOM:"Somalia",ZAF:"South Africa",SGS:"South Georgia and the South Sandwich Islands",SSD:"South Sudan",ESP:"Spain",LKA:"Sri Lanka",SDN:"Sudan",SUR:"Suriname",SJM:"Svalbard and Jan Mayen",SWZ:"Swaziland",SWE:"Sweden",CHE:"Switzerland",SYR:"Syrian Arab Republic",TWN:"Taiwan Province of China",TJK:"Tajikistan",TZA:"Tanzania, United Republic of",THA:"Thailand",TLS:"Timor-Leste",TGO:"Togo",TKL:"Tokelau",TON:"Tonga",TTO:"Trinidad and Tobago",TUN:"Tunisia",TUR:"Turkey",TKM:"Turkmenistan",TCA:"Turks and Caicos Islands",TUV:"Tuvalu",UGA:"Uganda",UKR:"Ukraine",ARE:"United Arab Emirates",GBR:"United Kingdom - British Citizen",GBD:"United Kingdom - British Overseas Territories Citizen",GBN:"United Kingdom - British National (Overseas)",GBO:"United Kingdom - British Overseas Citizen",GBP:"United Kingdom - British Protected person",USA:"United States",UMI:"United States Minor Outlying Islands",URY:"Uruguay",UZB:"Uzbekistan",VUT:"Vanuatu",VEN:"Venezuela, Bolivarian Republic of",VNM:"Viet Nam",VGB:"Virgin Islands (British)",VIR:"Virgin Islands (U.S.)",WLF:"Wallis and Futuna",ESH:"Western Sahara",YEM:"Yemen",ZMB:"Zambia",ZWE:"Zimbabwe",EUE:"European Union (EU)",UNO:"United Nations Organization or one of its officials",UNA:"United Nations specialized agency or one of its officials",UNK:"Resident of Kosovo to whom a travel document has been issued by the United Nations Interim Administration Mission in Kosovo (UNMIK)",XBA:"African Development Bank (ADB)",XIM:"African Export-Import Bank (AFREXIM bank)",XCC:"Caribbean Community or one of its emissaries (CARICOM)",XCO:"Common Market for Eastern and Southern Africa (COMESA)",XEC:"Economic Community of West African States (ECOWAS)",XPO:"International Criminal Police Organization (INTERPOL)",XOM:"Sovereign Military Order of Malta or one of its emissaries",XXA:"Stateless person, as defined in Article 1 of the 1954 Convention Relating to the Status of Stateless Persons",XXB:"Refugee, as defined in Article 1 of the 1951 Convention Relating to the Status of Refugees as amended by the 1967 Protocol",XXX:"Refugee, other than as defined under the code XXB above XXC Person of unspecified nationality, for whom issuing State does not consider it necessary to specify any of the codes XXA, XXB or XXC above, whatever that person’s status may be. This category may include a person who is neither stateless nor a refugee but who is of unknown nationality and legally residing in the State of issue."};Object.freeze(a),module.exports=a;
},{}],12:[function(require,module,exports) {
"use strict";const I={TD1:"TD1",TD2:"TD2",TD3:"TD3",SWISS_DRIVING_LICENSE:"SWISS_DRIVING_LICENSE",FRENCH_NATIONAL_ID:"FRENCH_NATIONAL_ID"};Object.freeze(I),module.exports=I;
},{}],15:[function(require,module,exports) {
"use strict";function r(r){if("string"==typeof r&&(r=r.split(/[\r\n]+/)),!Array.isArray(r))throw new TypeError("input must be an array or string");for(const t of r)if(!t.match(/[A-Z0-9<]+/))throw new TypeError('lines must be composed of only alphanumerical characters and "<"');return r}module.exports=r;
},{}],22:[function(require,module,exports) {
"use strict";function t(t,o){const e=[];for(const i of o)e.push(i(t));return e}function o(t){const o={};let e=!0;for(const i of t)i.valid||(e=!1),i.field&&(o[i.field]=i.value);return{fields:o,valid:e}}function e(e,i,n){const f=t(i,n),l=o(f);return{format:e,details:f,fields:l.fields,valid:l.valid}}module.exports=e;
},{}],28:[function(require,module,exports) {
"use strict";module.exports=function(r){const t=r.charAt(0);if("A"!==t&&"C"!==t&&"I"!==t)throw new Error(`invalid document code: ${r}. First character must be A, C or I`);const e=r.charAt(1);if("V"===e)throw new Error(`invalid document code: ${r}. Second character may not be V`);return"<"===e?{value:t,start:0,end:1}:r};
},{}],54:[function(require,module,exports) {
"use strict";module.exports=function(e){return e.replace(/<+$/g,"").replace(/</g," ")};
},{}],43:[function(require,module,exports) {
"use strict";const e=require("./cleanText");module.exports=function(t,r=/^[0-9A-Z<]+$/){if(!t.match(r))throw new Error(`invalid text: ${t}. Must match the following regular expression: ${r}`);return e(t)};
},{"./cleanText":54}],29:[function(require,module,exports) {
"use strict";var e=require("./parseText");module.exports=function(t){const r=e(t);return{value:r,start:0,end:0+r.length}};
},{"./parseText":43}],30:[function(require,module,exports) {
"use strict";var e=require("./parseText");module.exports=function(t,r,n){if("<"===n){const r=t.indexOf("<"),n=e(t.substring(r+1));return{value:n,start:r+1,end:r+1+n.length}}{const r=e(t);return{value:r,start:0,end:0+r.length}}};
},{"./parseText":43}],44:[function(require,module,exports) {
"use strict";const e=require("./cleanText");module.exports=function(t,n,s){let r,l;if("<"===n&&s){const e=s.indexOf("<");r=(l=t+s.substring(0,e-1)).length+1}else r=(l=e(t)).length;return{value:l,start:0,end:r}};
},{"./cleanText":54}],53:[function(require,module,exports) {
"use strict";module.exports=function(r,e){for(var t=0,i=[7,3,1],o=0;o<r.length;o++){var c=r.charCodeAt(o);60===c&&(c=0),c>=65&&(c-=55),c>=48&&(c-=48),t+=c*=i[o%3]}if((t%=10)!==Number(e))throw new Error(`invalid check digit: ${e}. Must be ${t}`)};
},{}],45:[function(require,module,exports) {
"use strict";var r=require("./check");module.exports=function(e,t,n){if("<"===e&&n){const u=n.indexOf("<");return t=`${t}<${n.substring(0,u-1)}`,e=n.charAt(u-1),r(t,e),{value:e,start:u,end:u+1}}return r(t,e),e};
},{"./check":53}],46:[function(require,module,exports) {
"use strict";const e=require("../generated/states"),t=require("./cleanText");module.exports=function(r){if(r=t(r),!e[r])throw new Error(`invalid state code: ${r}`);return{value:r,start:0,end:r.length}};
},{"../generated/states":13,"./cleanText":54}],47:[function(require,module,exports) {
"use strict";module.exports=function(e){switch(e){case"M":return"male";case"F":return"female";case"<":return"nonspecified";default:throw new Error(`invalid sex: ${e}. Must be M, F or <.`)}};
},{}],48:[function(require,module,exports) {
"use strict";module.exports=function(r){if(!r.match(/^[0-9<]{4,6}$/))throw new Error(`invalid date: ${r}`);const t=r.substring(2,4);if("<<"!==t&&(t<1||t>12))throw new Error(`invalid date month: ${t}`);if(6===r.length){const t=r.substring(4,6);if("<<"!==t&&(t<1||t>31))throw new Error(`invalid date day: ${t}`)}return r};
},{}],49:[function(require,module,exports) {
"use strict";const e=require("./check");module.exports=function(r,t){return!1!==r&&e(t,r),r};
},{"./check":53}],50:[function(require,module,exports) {
"use strict";var e=require("./check");module.exports=function(r,...t){const c=t.join("");return e(c,r),r};
},{"./check":53}],51:[function(require,module,exports) {
"use strict";var e=require("./parseText");module.exports=function(t){const r=t.replace(/.*?<{2}/,""),n=e(r,/^[A-Z<]+<*$/),l=t.length-r.length;return{value:n,start:l,end:l+n.length}};
},{"./parseText":43}],52:[function(require,module,exports) {
"use strict";var e=require("./parseText");module.exports=function(r){const t=e(r.replace(/<{2}.*/,""),/^[A-Z<]+<*$/);return{value:t,start:0,end:t.length}};
},{"./parseText":43}],31:[function(require,module,exports) {
"use strict";const e={label:"Document number",field:"documentNumber",parser:require("../parsers/parseDocumentNumber")},r={label:"Document number check digit",field:"documentNumberCheckDigit",parser:require("../parsers/parseDocumentNumberCheckDigit")},a={label:"Document code",field:"documentCode"},t={label:"Nationality",field:"nationality",parser:require("../parsers/parseState")},i={label:"Sex",field:"sex",parser:require("../parsers/parseSex")},s={label:"Expiration date",field:"expirationDate",parser:require("../parsers/parseDate")},p={label:"Expiration date check digit",field:"expirationDateCheckDigit",parser:require("../parsers/parseDateCheckDigit")},l={label:"Composite check digit",field:"compositeCheckDigit",parser:require("../parsers/parseCompositeCheckDigit")},m={label:"Birth date",field:"birthDate",parser:require("../parsers/parseDate")},u={label:"Birth date check digit",field:"birthDateCheckDigit",parser:require("../parsers/parseDateCheckDigit")},c={label:"Issue date",field:"issueDate",parser:require("../parsers/parseDate")},o={label:"First name",field:"firstName",parser:require("../parsers/parseFirstName")},d={label:"Last name",field:"lastName",parser:require("../parsers/parseLastName")},D={label:"Issuing state",field:"issuingState",parser:require("../parsers/parseState")};module.exports={documentNumberTemplate:e,documentNumberCheckDigitTemplate:r,documentCodeTemplate:a,nationalityTemplate:t,sexTemplate:i,expirationDateTemplate:s,expirationDateCheckDigitTemplate:p,birthDateTemplate:m,birthDateCheckDigitTemplate:u,issueDateTemplate:c,compositeCheckDigitTemplate:l,firstNameTemplate:o,lastNameTemplate:d,issuingStateTemplate:D};
},{"../parsers/parseDocumentNumber":44,"../parsers/parseDocumentNumberCheckDigit":45,"../parsers/parseState":46,"../parsers/parseSex":47,"../parsers/parseDate":48,"../parsers/parseDateCheckDigit":49,"../parsers/parseCompositeCheckDigit":50,"../parsers/parseFirstName":51,"../parsers/parseLastName":52}],32:[function(require,module,exports) {
"use strict";function e(e,t){return e[t.line].substring(t.start,t.end)}function t(e,t,r){if(typeof e[t]!==r)throw new TypeError(`${t} must be a ${r}`)}module.exports=function(r){t(r,"label","string"),null!==r.field&&t(r,"field","string"),t(r,"line","number"),t(r,"start","number"),t(r,"end","number"),t(r,"parser","function");const n=[{line:r.line,start:r.start,end:r.end}];if(Array.isArray(r.related))for(const e of r.related)t(e,"line","number"),t(e,"start","number"),t(e,"end","number"),n.push(e);return function(t){const a=e(t,r);let l=r.related||[];l=l.map(r=>e(t,r));const s={label:r.label,field:r.field,value:null,valid:!1,ranges:n.map(r=>({line:r.line,start:r.start,end:r.end,raw:e(t,r)}))},i=s.ranges[0];s.line=i.line,s.start=i.start,s.end=i.end;try{let e=r.parser(a,...l);s.value="object"==typeof e?e.value:e,s.valid=!0,"object"==typeof e&&(s.start=i.start+e.start,s.end=i.start+e.end)}catch(e){s.error=e.message}return s}};
},{}],23:[function(require,module,exports) {
"use strict";const e=require("../parsers/parseDocumentCodeId"),t=require("../parsers/parseOptional"),a=require("../parsers/parseDocumentNumberOptional"),{documentCodeTemplate:n,issuingStateTemplate:i,documentNumberTemplate:s,documentNumberCheckDigitTemplate:r,birthDateTemplate:l,birthDateCheckDigitTemplate:d,sexTemplate:p,expirationDateTemplate:m,expirationDateCheckDigitTemplate:c,nationalityTemplate:o,compositeCheckDigitTemplate:b,lastNameTemplate:g,firstNameTemplate:O}=require("./fieldTemplates"),u=require("./createFieldParser");module.exports=[Object.assign({},n,{line:0,start:0,end:2,parser:e}),Object.assign({},i,{line:0,start:2,end:5}),Object.assign({},s,{line:0,start:5,end:14,related:[{line:0,start:14,end:15},{line:0,start:15,end:30}]}),Object.assign(r,{line:0,start:14,end:15,related:[{line:0,start:5,end:14},{line:0,start:15,end:30}]}),{label:"Optional field 1",field:"optional1",line:0,start:15,end:30,related:[{line:0,start:5,end:14},{line:0,start:14,end:15}],parser:a},Object.assign({},l,{start:0,end:6,line:1}),Object.assign({},d,{line:1,start:6,end:7,related:[{line:1,start:0,end:6}]}),Object.assign({},p,{line:1,start:7,end:8}),Object.assign({},m,{line:1,start:8,end:14}),Object.assign({},c,{line:1,start:14,end:15,related:[{line:1,start:8,end:14}]}),Object.assign({},o,{line:1,start:15,end:18}),{label:"Optional field 2",field:"optional2",line:1,start:18,end:29,parser:t},Object.assign({},b,{line:1,start:29,end:30,related:[{line:0,start:5,end:30},{line:1,start:0,end:7},{line:1,start:8,end:15},{line:1,start:18,end:29}]}),Object.assign({},g,{line:2,start:0,end:30}),Object.assign({},O,{line:2,start:0,end:30})].map(u);
},{"../parsers/parseDocumentCodeId":28,"../parsers/parseOptional":29,"../parsers/parseDocumentNumberOptional":30,"./fieldTemplates":31,"./createFieldParser":32}],17:[function(require,module,exports) {
"use strict";const e=require("./checkLines"),r=require("./getResult"),{TD1:t}=require("../formats"),n=require("./td1Fields");module.exports=function(i){if(3!==(i=e(i)).length)throw new Error(`invalid number of lines: ${i.length}: Must be 3 for ${t}`);return i.forEach((e,r)=>{if(30!==e.length)throw new Error(`invalid number of characters for line ${r+1}: ${e.length}. Must be 30 for ${t}`)}),r(t,i,n)};
},{"./checkLines":15,"./getResult":22,"../formats":12,"./td1Fields":23}],24:[function(require,module,exports) {
"use strict";const e=require("../parsers/parseDocumentCodeId"),t=require("../parsers/parseOptional"),{documentCodeTemplate:a,issuingStateTemplate:n,firstNameTemplate:s,lastNameTemplate:i,documentNumberTemplate:r,documentNumberCheckDigitTemplate:l,nationalityTemplate:d,birthDateTemplate:p,birthDateCheckDigitTemplate:c,sexTemplate:m,expirationDateTemplate:b,expirationDateCheckDigitTemplate:g,compositeCheckDigitTemplate:o}=require("./fieldTemplates"),O=require("./createFieldParser");module.exports=[Object.assign({},a,{line:0,start:0,end:2,parser:e}),Object.assign({},n,{line:0,start:2,end:5}),Object.assign({},i,{line:0,start:5,end:36}),Object.assign({},s,{line:0,start:5,end:36}),Object.assign({},r,{line:1,start:0,end:9,related:[{line:1,start:9,end:10},{line:1,start:28,end:35}]}),Object.assign({},l,{line:1,start:9,end:10,related:[{line:1,start:0,end:9},{line:1,start:28,end:35}]}),Object.assign({},d,{line:1,start:10,end:13}),Object.assign({},p,{line:1,start:13,end:19}),Object.assign({},c,{line:1,start:19,end:20,related:[{line:1,start:13,end:19}]}),Object.assign({},m,{line:1,start:20,end:21}),Object.assign({},b,{line:1,start:21,end:27}),Object.assign({},g,{line:1,start:27,end:28,related:[{line:1,start:21,end:27}]}),{label:"Optional field",field:"optional",line:1,start:28,end:35,parser:t},Object.assign({},o,{line:1,start:35,end:36,related:[{line:1,start:0,end:10},{line:1,start:13,end:20},{line:1,start:21,end:35}]})].map(O);
},{"../parsers/parseDocumentCodeId":28,"../parsers/parseOptional":29,"./fieldTemplates":31,"./createFieldParser":32}],18:[function(require,module,exports) {
"use strict";const e=require("./checkLines"),r=require("./getResult"),{TD2:t}=require("../formats"),n=require("./td2Fields");module.exports=function(i){if(2!==(i=e(i)).length)throw new Error(`invalid number of lines: ${i.length}: Must be 2 for ${t}`);return i.forEach((e,r)=>{if(36!==e.length)throw new Error(`invalid number of characters for line ${r+1}: ${e.length}. Must be 36 for TD2`)}),r(t,i,n)};
},{"./checkLines":15,"./getResult":22,"../formats":12,"./td2Fields":24}],33:[function(require,module,exports) {
"use strict";module.exports=function(t){const r=t.charAt(0);if("P"!==r)throw new Error(`invalid document code: ${t}. First character must be P`);const e=t.charAt(1);if(!e.match(/[A-Z<]/))throw new Error(`invalid document code: ${t}. Second character must be a letter or <`);return"<"===e?{value:r,start:0,end:1}:t};
},{}],34:[function(require,module,exports) {
"use strict";var e=require("./parseText");module.exports=function(t){const r=e(t,/^[A-Z0-9<]+<*$/);return{value:r,start:0,end:r.length}};
},{"./parseText":43}],35:[function(require,module,exports) {
"use strict";var r=require("./check");const e=require("./cleanText");module.exports=function(t,i){if(""===e(i)){if("<"!==t&&"0"!==t)throw new Error(`invalid check digit ${t}: must be 0 or <`);return t}return r(i,t),t};
},{"./check":53,"./cleanText":54}],25:[function(require,module,exports) {
"use strict";const e=require("../parsers/parseDocumentCodePassport"),t=require("../parsers/parsePersonalNumber"),a=require("../parsers/parsePersonalNumberCheckDigit"),{documentCodeTemplate:s,issuingStateTemplate:r,lastNameTemplate:n,firstNameTemplate:i,documentNumberTemplate:l,documentNumberCheckDigitTemplate:d,nationalityTemplate:m,birthDateTemplate:p,birthDateCheckDigitTemplate:c,sexTemplate:b,expirationDateTemplate:g,expirationDateCheckDigitTemplate:o,compositeCheckDigitTemplate:u}=require("./fieldTemplates"),T=require("./createFieldParser");module.exports=[Object.assign({},s,{line:0,start:0,end:2,parser:e}),Object.assign({},r,{line:0,start:2,end:5}),Object.assign({},n,{line:0,start:5,end:44}),Object.assign({},i,{line:0,start:5,end:44}),Object.assign({},l,{line:1,start:0,end:9}),Object.assign({},d,{line:1,start:9,end:10,related:[{line:1,start:0,end:9}]}),Object.assign({},m,{line:1,start:10,end:13}),Object.assign({},p,{line:1,start:13,end:19}),Object.assign({},c,{line:1,start:19,end:20,related:[{line:1,start:13,end:19}]}),Object.assign({},b,{line:1,start:20,end:21}),Object.assign({},g,{line:1,start:21,end:27}),Object.assign({},o,{line:1,start:27,end:28,related:[{line:1,start:21,end:27}]}),{label:"Personal number",field:"personalNumber",line:1,start:28,end:42,parser:t},{label:"Personal number check digit",field:"personalNumberCheckDigit",line:1,start:42,end:43,related:[{line:1,start:28,end:42}],parser:a},Object.assign({},u,{line:1,start:43,end:44,related:[{line:1,start:0,end:10},{line:1,start:13,end:20},{line:1,start:21,end:43}]})].map(T);
},{"../parsers/parseDocumentCodePassport":33,"../parsers/parsePersonalNumber":34,"../parsers/parsePersonalNumberCheckDigit":35,"./fieldTemplates":31,"./createFieldParser":32}],19:[function(require,module,exports) {
"use strict";const e=require("./checkLines"),r=require("./getResult"),{TD3:t}=require("../formats"),n=require("./td3Fields");module.exports=function(i){if(2!==(i=e(i)).length)throw new Error(`invalid number of lines: ${i.length}: Must be 2 for ${t}`);return i.forEach((e,r)=>{if(44!==e.length)throw new Error(`invalid number of characters for line ${r+1}: ${e.length}. Must be 44 for TD3`)}),r(t,i,n)};
},{"./checkLines":15,"./getResult":22,"../formats":12,"./td3Fields":25}],39:[function(require,module,exports) {
"use strict";module.exports=function(e){switch(e){case"D":case"F":case"I":case"R":return e;default:throw new Error(`invalid languageCode code: ${e}. Must be D, F, I or R`)}};
},{}],38:[function(require,module,exports) {
"use strict";const r=require("./parseLanguageCode");module.exports=function(t){var n=t.substring(0,3),i=t.substring(3,6),e=t.charAt(6),s=t.substring(7);if(!n.match(/^[A-Z0-9]{3}$/))throw new Error(`invalid document number: ${t}. Must start with three alphanumeric digits`);if(!i.match(/^[0-9]{3}$/))throw new Error(`invalid document number: ${t}. Must have numeric digits in positions 4, 5 and 6`);if("<<"!==s)throw new Error(`invalid document number: ${t}. Must end with <<`);return r(e),{value:t.substring(0,7),start:0,end:7}};
},{"./parseLanguageCode":39}],40:[function(require,module,exports) {
"use strict";module.exports=function(e){if("FA"!==e)throw new Error(`invalid document code: ${e}. Must be FA`);return e};
},{}],41:[function(require,module,exports) {
"use strict";module.exports=function(r){if("CHE"!==r&&"LIE"!==r)throw new Error(`invalid state code: ${r}. Must be CHE or LIE`);return r};
},{}],36:[function(require,module,exports) {
"use strict";module.exports=function(r){if(!r.match(/^[0-9]+$/))throw new Error(`invalid number: ${r}`);return r};
},{}],42:[function(require,module,exports) {
"use strict";module.exports=function(o){if(!o.match(/^<*$/))throw new Error(`invalid separator: ${o}. Must be composed only of "<"`);return o};
},{}],26:[function(require,module,exports) {
"use strict";const e=require("../parsers/swissDrivingLicense/parseDocumentNumber"),r=require("../parsers/swissDrivingLicense/parseLanguageCode"),s=require("../parsers/swissDrivingLicense/parseDocumentCode"),a=require("../parsers/swissDrivingLicense/parseIssuingState"),i=require("../parsers/parseNumber"),t=require("../parsers/swissDrivingLicense/checkSeparator"),{documentNumberTemplate:n,documentCodeTemplate:l,issuingStateTemplate:p,birthDateTemplate:d,lastNameTemplate:u,firstNameTemplate:c}=require("./fieldTemplates"),m=require("./createFieldParser");module.exports=[Object.assign({},n,{line:0,start:0,end:9,parser:e}),{label:"Language code",field:"languageCode",line:0,start:6,end:7,parser:r},Object.assign({},l,{line:1,start:0,end:2,parser:s}),Object.assign({},p,{line:1,start:2,end:5,parser:a}),{label:"PIN code",field:"pinCode",line:1,start:5,end:14,parser:i},{label:"Version number",field:"versionNumber",line:1,start:14,end:17,parser:i},{label:"Separator 1",field:null,line:1,start:17,end:19,parser:t},Object.assign({},d,{line:1,start:19,end:25}),{label:"Separator 2",field:null,line:1,start:25,end:30,parser:t},Object.assign({},u,{line:2,start:0,end:30}),Object.assign({},c,{line:2,start:0,end:30})].map(m);
},{"../parsers/swissDrivingLicense/parseDocumentNumber":38,"../parsers/swissDrivingLicense/parseLanguageCode":39,"../parsers/swissDrivingLicense/parseDocumentCode":40,"../parsers/swissDrivingLicense/parseIssuingState":41,"../parsers/parseNumber":36,"../parsers/swissDrivingLicense/checkSeparator":42,"./fieldTemplates":31,"./createFieldParser":32}],20:[function(require,module,exports) {
"use strict";const r=require("./checkLines"),e=require("./getResult"),{SWISS_DRIVING_LICENSE:n}=require("../formats"),i=require("./swissDrivingLicenseFields");module.exports=function(t){if(3!==(t=r(t)).length)throw new Error(`invalid number of lines: ${t.length}: Must be 3 for ${n}`);if(9!==t[0].length)throw new Error(`invalid number of characters for line 1: ${t[0].length}. Must be 9 for ${n}`);if(30!==t[1].length)throw new Error(`invalid number of characters for line 2: ${t[1].length}. Must be 30 for ${n}`);if(30!==t[2].length)throw new Error(`invalid number of characters for line 3: ${t[2].length}. Must be 30 for ${n}`);return e(n,t,i)};
},{"./checkLines":15,"./getResult":22,"../formats":12,"./swissDrivingLicenseFields":26}],37:[function(require,module,exports) {
"use strict";const t=require("./cleanText");module.exports=function(e){if(!e.match(/^[A-Z<]+$/))throw new Error(`invalid text: ${e}. Must be only alphabetical with <`);return t(e)};
},{"./cleanText":54}],27:[function(require,module,exports) {
"use strict";const e=require("../parsers/parseAlpha"),t=require("../parsers/parseDocumentCodeId"),a=require("../parsers/parseOptional"),{documentCodeTemplate:s,issuingStateTemplate:i,lastNameTemplate:r,issueDateTemplate:n,firstNameTemplate:l,documentNumberTemplate:d,documentNumberCheckDigitTemplate:p,birthDateTemplate:m,birthDateCheckDigitTemplate:c,sexTemplate:b,compositeCheckDigitTemplate:o}=require("./fieldTemplates"),g=require("./createFieldParser");module.exports=[Object.assign({},s,{line:0,start:0,end:2,parser:t}),Object.assign({},i,{line:0,start:2,end:5}),Object.assign({},r,{line:0,start:5,end:30,parser:e}),{label:"Administrative code",field:"administrativeCode",line:0,start:30,end:36,parser:a},Object.assign({},n,{line:1,start:0,end:4}),{label:"Administrative code 2",field:"administrativeCode2",line:1,start:4,end:7,parser:a},Object.assign({},d,{line:1,start:7,end:12}),Object.assign({},p,{line:1,start:12,end:13,related:[{line:1,start:0,end:12}]}),Object.assign({},l,{line:1,start:13,end:27,parser:e}),Object.assign({},m,{line:1,start:27,end:33}),Object.assign({},c,{line:1,start:33,end:34,related:[{line:1,start:27,end:33}]}),Object.assign({},b,{line:1,start:34,end:35}),Object.assign({},o,{line:1,start:35,end:36,related:[{line:0,start:0,end:36},{line:1,start:0,end:35}]})].map(g);
},{"../parsers/parseAlpha":37,"../parsers/parseDocumentCodeId":28,"../parsers/parseOptional":29,"./fieldTemplates":31,"./createFieldParser":32}],21:[function(require,module,exports) {
"use strict";const e=require("./checkLines"),r=require("./getResult"),{FRENCH_NATIONAL_ID:n}=require("../formats"),t=require("./frenchNationalIdFields");module.exports=function(i){if(2!==(i=e(i)).length)throw new Error(`invalid number of lines: ${i.length}: Must be 2 for ${n}`);return i.forEach((e,r)=>{if(36!==e.length)throw new Error(`invalid number of characters for line ${r+1}: ${e.length}. Must be 36 for ${n}`)}),r(n,i,t)};
},{"./checkLines":15,"./getResult":22,"../formats":12,"./frenchNationalIdFields":27}],16:[function(require,module,exports) {
"use strict";const e=require("./td1"),r=require("./td2"),i=require("./td3"),s=require("./swissDrivingLicense"),t=require("./frenchNationalId");module.exports={TD1:e,TD2:r,TD3:i,SWISS_DRIVING_LICENSE:s,FRENCH_NATIONAL_ID:t};
},{"./td1":17,"./td2":18,"./td3":19,"./swissDrivingLicense":20,"./frenchNationalId":21}],14:[function(require,module,exports) {
"use strict";const e=require("./checkLines"),r=require("../formats"),t=require("./parsers");function n(r){switch((r=e(r)).length){case 2:case 3:switch(r[0].length){case 30:return t.TD1(r);case 36:return r[0].substr(30,36).match(/[0-9]/)?t.FRENCH_NATIONAL_ID(r):t.TD2(r);case 44:return t.TD3(r);case 9:return t.SWISS_DRIVING_LICENSE(r);default:throw new Error("unrecognized document format. First line of input must have 30 (TD1), 36 (TD2 or French National Id), 44 (TD3) or 9 (Swiss Driving License) characters")}default:throw new Error(`unrecognized document format. Input must have two or three lines, found${r.length}`)}}for(const e in r)n[e]=t[e];module.exports=n;
},{"./checkLines":15,"../formats":12,"./parsers":16}],11:[function(require,module,exports) {
"use strict";const e=require("./generated/states"),r=require("./formats"),s=require("./parse/parse");module.exports={states:e,formats:r,parse:s};
},{"./generated/states":13,"./formats":12,"./parse/parse":14}],5:[function(require,module,exports) {
"use strict";var e=require("exif-js"),n=o(e),t=require("croppie"),r=require("mrz");function o(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}var a={lang:"OCRB",load_system_dawg:"F",load_freq_dawg:"F",load_unambig_dawg:"F",load_punc_dawg:"F",load_number_dawg:"F",load_fixed_length_dawgs:"F",load_bigram_dawg:"F",wordrec_enable_assoc:"F",tessedit_pageseg_mode:"6",tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<"};window.EXIF=n,window.Tesseract=Tesseract.create({langPath:"https://exteris.github.io/tesseract-mrz/lang/"});var i=document.getElementById("progress"),c=document.getElementById("document"),l=document.getElementById("document-content"),s=document.getElementById("document-check");window.Tesseract.recognize(document.createElement("canvas"),a).progress(function(e){console.log(e),i.innerText=Math.round(100*e.progress)+"%"});var d=new t.Croppie(c,{viewport:{width:900,height:220},enableExif:!0,showZoomer:!1,enforceBoundary:!1,enableResize:!0,enableOrientation:!0}),u=function(e){var n=e.target.files[0],t=new FileReader;t.onload=function(e){return d.bind(e.target.result)},t.readAsDataURL(n)},g=function(){return d.rotate(90)},f=function(){l.value="",d.result().then(function(e){window.Tesseract.recognize(e,a).progress(function(e){console.log(e),i.innerText=Math.round(100*e.progress)+"%"}).then(function(e){console.log(e);var n=e.lines.map(function(e){return e.text}).map(function(e){return e.replace(/ |\r\n|\r|\n/g,"")}).filter(function(e){return e.includes("<<")}).filter(function(e){return e.length<48}).filter(function(e){return e.length>28});console.log(n),l.value=n.join("\r\n"),m()}).catch(function(e){return console.error(e)})})},m=function(){var e=l.value.split("\n");console.log(e);try{var n=e?(0,r.parse)(e):{valid:!1};console.log(n),s.innerText=JSON.stringify(n,null,2),l.className=n.valid?"valid":"invalid"}catch(e){s.innerText=e,l.className="invalid"}},v=function(e){e.target.select(),document.execCommand("copy")};document.getElementById("fileInput").addEventListener("change",u),document.getElementById("rotate").addEventListener("click",g),document.getElementById("scan").addEventListener("click",f),document.getElementById("check").addEventListener("click",m),l.addEventListener("click",v),s.addEventListener("click",v),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then(function(){return console.log("Service-Worker-Registered")});
},{"exif-js":9,"croppie":10,"mrz":11,"./../service-worker.js":[["service-worker.js",7],"service-worker.map",7]}]},{},[5])
//# sourceMappingURL=src.ca3e50a0.map